<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Speech API Example</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Speech Recognition</h1>
        <div class="text-center">
            <button id="start-btn" class="btn btn-primary">Start Recording</button>
            <button id="pause-btn" class="btn btn-warning">Pause Recording</button>
            <button id="stop-btn" class="btn btn-danger">Stop Recording</button>
        </div>
        <div id="indicator" class="mt-3 text-center text-info"></div>
        <textarea id="result" class="form-control mt-3" rows="10" placeholder="Your speech will appear here..."></textarea>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const startBtn = document.getElementById('start-btn');
            const pauseBtn = document.getElementById('pause-btn');
            const stopBtn = document.getElementById('stop-btn');
            const resultArea = document.getElementById('result');
            const indicator = document.getElementById('indicator');
        
            // Check for browser support
            if (!('webkitSpeechRecognition' in window)) {
                resultArea.textContent = 'Speech recognition is not supported in your browser.';
                return;
            }
        
            const recognition = new webkitSpeechRecognition();
            recognition.continuous = true;  // Enable continuous recognition
            recognition.interimResults = true;  // Enable interim results
            recognition.lang = 'en-US';
            
            let finalTranscript = '';  // Store final transcript here
        
            startBtn.addEventListener('click', function() {
                recognition.start();
                indicator.textContent = 'Listening... You can speak now!';
            });
        
            pauseBtn.addEventListener('click', function() {
                recognition.stop();
                indicator.textContent = 'Recording paused. Click start to continue.';
            });
        
            stopBtn.addEventListener('click', function() {
                recognition.stop();
                indicator.textContent = 'Recording stopped.';
                resultArea.value += '\n--- Recording stopped ---';
            });
        
            recognition.onresult = function(event) {
                let interimTranscript = '';
        
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript + ' ';
                    } else {
                        interimTranscript += transcript;
                    }
                }
        
                resultArea.value = `Final: ${finalTranscript}\nInterim: ${interimTranscript}`;
            };
        
            recognition.onerror = function(event) {
                resultArea.value = `Error occurred: ${event.error}`;
            };
        });
        
    </script>
</body>
</html>
